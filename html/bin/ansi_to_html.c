#pragma strict_types

//  Takes 2 args in calling.
//  1: string to be converted
//  2. 'title' (optional)

//  returns converted string

// 
//  -Joe Hourcle, oneiros@3k
// 

// #######################
//  user defined variables
// #######################

#define BODY_TAG        "<BODY BGCOLOR=000000 TEXT=FFFFFF LINK=CCCCCC VLINK=999999>"

// ##########################
//  color definitions go here
// ##########################

#define ansi_black        "[30m"
#define ansi_blue         "[34m"
#define ansi_brown        "[33m"
#define ansi_cyan         "[36m"
#define ansi_flash        "[5m"
#define ansi_green        "[32m"
#define ansi_grey         "[37m"
#define ansi_hiblack      "[30;1m"
#define ansi_hiblue       "[34;1m"
#define ansi_hicyan       "[36;1m"
#define ansi_higreen      "[32;1m"
#define ansi_hilite       "[1m"
#define ansi_himagenta    "[35;1m"
#define ansi_hired        "[31;1m"
#define ansi_inverse      "[7m"
#define ansi_italics      "[3m"
#define ansi_magenta      "[35m"
#define ansi_red          "[31m"
#define ansi_underline    "[4m"
#define ansi_white        "[37;1m"
#define ansi_hiyellow     "[33;1m"
#define ansi_yellow       "[33m"
#define ansi_yellow2      "[0;33m"
#define ansi_reset        "[37;0m"
#define ansi_reset2       "[0m"

// ###################
//  main program stuff
// ###################



string convert (string str, string title) {
  
    str = implode(explode (str, ansi_black),     "</FONT><FONT COLOR=000000>");
    str = implode(explode (str, ansi_blue),      "</FONT><FONT COLOR=000099>");
    str = implode(explode (str, ansi_brown),     "</FONT><FONT COLOR=666600>");
    str = implode(explode (str, ansi_cyan),      "</FONT><FONT COLOR=00CCCC>");
    str = implode(explode (str, ansi_flash),     "</FONT><FONT>");
    str = implode(explode (str, ansi_green),     "</FONT><FONT COLOR=009900>");
    str = implode(explode (str, ansi_grey),      "</FONT><FONT COLOR=999999>");
    str = implode(explode (str, ansi_hiblack),   "</FONT><FONT COLOR=000000>");
    str = implode(explode (str, ansi_hiblue),    "</FONT><FONT COLOR=0000FF>");
    str = implode(explode (str, ansi_hicyan),    "</FONT><FONT COLOR=00FFFF>");
    str = implode(explode (str, ansi_higreen),   "</FONT><FONT COLOR=00FF00>");
    str = implode(explode (str, ansi_hilite),    "</FONT><FONT>");
    str = implode(explode (str, ansi_himagenta), "</FONT><FONT COLOR=FF00FF>");
    str = implode(explode (str, ansi_hired),     "</FONT><FONT COLOR=FF0000>");
    str = implode(explode (str, ansi_inverse),   "</FONT><FONT>");
    str = implode(explode (str, ansi_italics),   "</FONT><FONT>");
    str = implode(explode (str, ansi_magenta),   "</FONT><FONT COLOR=990099>");
    str = implode(explode (str, ansi_red),       "</FONT><FONT COLOR=CC0000>");
    str = implode(explode (str, ansi_reset),     "</FONT><FONT COLOR=FFFFFF>");
    str = implode(explode (str, ansi_reset2),    "</FONT><FONT COLOR=FFFFFF>");
    str = implode(explode (str, ansi_underline), "</FONT><FONT>");
    str = implode(explode (str, ansi_white),     "</FONT><FONT COLOR=FFFFFF>");
    str = implode(explode (str, ansi_yellow),    "</FONT><FONT COLOR=CCCC00>");
    str = implode(explode (str, ansi_yellow2),   "</FONT><FONT COLOR=CCCC00>");
    str = implode(explode (str, ansi_hiyellow),  "</FONT><FONT COLOR=FFFF00>");
    

if (!title) 
	return sprintf("<!-- autogenerated code from ansi-to-html -->\n\
<!-- if something's wrong, mail oneiros@dcr.net -->\n\n\
<HTML><HEAD><TITLE>3Kingdoms -- Converted Ansi</TITLE></HEAD>\n\n\
%s\n\n<P><HR><P>\n\n\
<PRE><FONT COLOR=000000>%s</FONT></PRE>\n\n<P><HR><P>\n\n\
<a HREF=\"http://3k.org/new/user_activity.html\">Back to the 3K Census Page</a>\n\
</BODY></HTML>", BODY_TAG, str);

	return sprintf("<!-- autogenerated code from ansi-to-html -->\n\
<!-- if something's wrong, mail oneiros@dcr.net -->\n\n\
<HTML><HEAD><TITLE>%s</TITLE></HEAD>\n\n\
%s\n\n<H1>%s</H1>\n\n<P><HR><P>\n\n\
<PRE><FONT COLOR=000000>%s</FONT></PRE>\n\n<P><HR><P>\n\n\
<A HREF=\"http://3k.org\">Back to 3Kingdoms Home Page</A>\n\
</BODY></HTML>", title, BODY_TAG, title, str);



}

